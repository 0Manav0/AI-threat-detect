{% extends "base.html" %}
{% block title %}Prediction History{% endblock %}

{% block content %}
<h2>Prediction History</h2>

{% if past_data %}
    {% for entry in past_data %}
        <div class="history-card">
            <h3>Prediction: 
                {% if entry.prediction == 1 %}
                    Threat Detected
                {% else %}
                    Safe
                {% endif %}
            </h3>
            <p><strong>Confidence:</strong> {{ entry.confidence }}</p>
            
            {% if entry.warning %}
                <p class="warning"><strong>Warning:</strong> {{ entry.warning }}</p>
            {% endif %}

            <p><strong>Issues:</strong> {{ entry.issues | join(', ') }}</p>

            <p><strong>Input Data:</strong></p>
            <ul>
                {% for key, value in entry.input.items() %}
                    <li>{{ key.replace('_', ' ').title() }}: {{ value }}</li>
                {% endfor %}
            </ul>
        </div>
        <hr>
    {% endfor %}
{% else %}
    <p>No prediction history available yet.</p>
{% endif %}

{% endblock %}

{% block styles %}
<style>
.history-card {
    background-color: #f5f5f5;
    padding: 15px;
    margin-bottom: 20px;
    border-radius: 8px;
    box-shadow: 0 0 8px rgba(0,0,0,0.1);
}
.history-card h3 {
    margin-top: 0;
}
.warning {
    color: red;
    font-weight: bold;
}
ul {
    list-style-type: square;
    margin-left: 20px;
}
</style>
{% endblock %}
